@use 'user_options/user_options' as options;

.container {
	display: flex;
	flex-wrap: wrap;
	flex-direction: column;
	width: 100vw;
}


//## Grid styling allows bootstrap like positionning

@mixin row{
	display: flex;
	flex: 1;
	flex-wrap: wrap;
	box-sizing: border-box;
}

@mixin col{
	flex:0 0 auto;
	box-sizing: border-box;
}

.row{
	@include row();
}

.col{
	@include col();
}

@mixin col-offset($percentage){
	margin-inline-start: $percentage;
}


.col-offset-0{
	@include col-offset(0);
}

@mixin row-size ($percentage){
	@include row();
	height: $percentage;
	flex: 0 0 auto;
}

@mixin col-size($percentage){
	@include col();
	width: $percentage;
}


//## Grid style generator uses @mixins to load classes inside @media



//# Responsible of creating the classes
@each $name , $size in options.$sizes{
	//# Here we create the classes for the smallest size. 
	//# Since the smallest size is also the fallback, the classes names shouldn't reference the size.
	@if $size == 0px{

		@for $i from 1 through options.$col_max_amount{


			//TODO Refactor col rows and offset creation so it uses a generator;

			$percentage: calc( (100% / options.$col_max_amount) * $i); 

			.col-#{$i}{
				@include col-size($percentage);
			}

			.col-offset-#{$i}{
				@include col-offset($percentage)
			}

			.row-#{$i}{
				@include row-size($percentage);
			}
		}
	} @else{
		@media screen and (width >= $size) {
			.col-#{$name}-offset-0{
					@include col-offset(0);
			}

			@for $i from 1 through options.$col_max_amount{

				$percentage: calc( (100% / options.$col_max_amount) * $i);
				
				.col-#{$name}-#{$i}{
					@include col-size($percentage);
				}

				.col-#{$name}-offset-#{$i}{
					@include col-offset($percentage);
				}

				.row-#{$name}-#{$i}{
					@include row-size($percentage);
				}
			}
		}
	}
}

